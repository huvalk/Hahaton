FROM ubuntu:16.04

USER root

COPY ../cmd /home/cmd

WORKDIR /home/cmd

RUN apt -y update && apt -y install software-properties-common && \
    add-apt-repository universe && \
    apt -y update && apt-get -y upgrade && apt-get -y dist-upgrade && apt-get -y autoremove && \
    apt install -y wget zip unzip gcc g++ build-essential cmake

RUN DEBIAN_FRONTEND="noninteractive" apt install -y \
            build-essential \
            cmake \
            git \
            pkg-config \
        gfortran \
        libatlas-base-dev \
        liblapacke-dev \
        liblapack-dev \
        libavcodec-dev \
        libavformat-dev \
        libswscale-dev \
        libv4l-dev \
        v4l-utils \
        libxvidcore-dev \
        libx264-dev \
        libfontconfig1-dev \
        libcairo2-dev \
        libgdk-pixbuf2.0-dev \
        libpango1.0-dev \
        libgtk2.0-dev \
        libgtk-3-dev \
        libcanberra-gtk3* \
        libhdf5-dev \
        libhdf5-serial-dev \
        libqtgui4 \
        libqtwebkit4 \
        libqt4-test \
        python3-pyqt5 \
            libgstreamer1.0-dev \
            libgstreamer-plugins-base1.0-dev \
        libjpeg-dev \
        libtiff-dev \
        libpng-dev \
        libjasper-dev \
        libtbb-dev \
        libtbb2 \
        python3-dev \
        python3-pip \
        python3-numpy

RUN DEBIAN_FRONTEND="noninteractive" ./build_opencv.sh

